<template>
    <section class="promo-section" :style="{
        backgroundImage: 'url(' + backgroundImage + ')',
        backgroundPosition: 'top',
        backgroundRepeat: 'no-repeat',
        backgroundSize: 'cover'
    }">
        <div class="container">
            <div class="promo-content">
                <div class="promo-card">
                    <h1 class="promo-title">–ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–π –ø—Ä–æ–µ–∫—Ç</h1>
                    <p class="promo-subtitle">–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</p>
                    
                    <div class="search-container">
                        <div class="search-input-wrapper">
                            <input 
                                v-model="searchQuery"
                                class="search-input" 
                                placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞..."
                                @keypress.enter="handleSearch"
                            >
                            <span class="search-icon">üîç</span>
                        </div>
                        <button class="search-btn" @click="handleSearch">
                            <span>–ù–∞–π—Ç–∏ –ø—Ä–æ–µ–∫—Ç</span>
                            <span class="btn-arrow">‚Üí</span>
                        </button>
                    </div>

                  
                
                </div>
            </div>
        </div>
    </section>
</template>

<script>
import './ProjectList.vue'
export default {
    name: 'MyPromo',
    data() {
        return {
            searchQuery: '',
            backgroundImage: '' ,
            
            
                }
    },
    methods: {
       async handleSearch() {
            if (this.searchQuery.trim()) {
                 const response= await fetch('/data/projects.json')
                 const data = await response.json()
                     const foundProject = data.projects.find(project => {
                            const projectTitle = project.title.toLowerCase();
                            const searchTerm = this.searchQuery.toLowerCase();
                            return projectTitle.includes(searchTerm);
                        });
                    if(foundProject){
                        console.log('ok')
                        this.$router.push(`/project/${foundProject.id}`);
                    }
                    else console.log('none')
                 }
                 
                
                console.log('–ü–æ–∏—Å–∫ –∞—É–∫—Ü–∏–æ–Ω–∞:', this.searchQuery);
                
            }
        }
    }

</script>

<style scoped>

</style>